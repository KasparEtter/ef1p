// Automatic heading numbering inspired by http://philarcher.org/diary/2013/headingnumbers/.

h2,
h3,
h4,
h5,
h6,
summary {
  padding-top: $paragraph-margin-bottom;
}

summary {
  margin-top: -$paragraph-margin-bottom;
}

h1 {
  margin-top: 0;
}

$heading-margin-top-to-text-factor: 1.5; // Custom variable only used in this file and _screen.scss.
$heading-margin-top-to-heading-factor: 1; // Custom variable only used in this file and _screen.scss.

h1,
header {
  counter-reset: h2;
}

h2 {
  margin-top: $h2-font-size * $heading-margin-top-to-text-factor - 2 * $paragraph-margin-bottom;
  counter-reset: h3;

  &::before {
    content: counter(h2) ". ";
    counter-increment: h2;
  }
}

h3 {
  margin-top: $h3-font-size * $heading-margin-top-to-text-factor - 2 * $paragraph-margin-bottom;
  counter-reset: h4;

  &::before {
    content: counter(h2) "." counter(h3) ". ";
    counter-increment: h3;
  }
}

h4 {
  margin-top: $h4-font-size * $heading-margin-top-to-text-factor - 2 * $paragraph-margin-bottom;

  &::before {
    content: counter(h2) "." counter(h3) "." counter(h4) ". ";
    counter-increment: h4;
  }
}

h5 {
  margin-top: $h5-font-size * $heading-margin-top-to-text-factor - 2 * $paragraph-margin-bottom;
  font-style: italic;
}

h6 {
  margin-top: $h6-font-size * $heading-margin-top-to-text-factor - 2 * $paragraph-margin-bottom;
}

h1 + h2,
p.lead + h2 {
  margin-top: $h2-font-size * $heading-margin-top-to-heading-factor - 2 * $paragraph-margin-bottom;
}

h2 + h3 {
  margin-top: $h3-font-size * $heading-margin-top-to-heading-factor - 2 * $paragraph-margin-bottom;
}

h3 + h4 {
  margin-top: $h4-font-size * $heading-margin-top-to-heading-factor - 2 * $paragraph-margin-bottom;
}

h4 + h5 {
  margin-top: $h5-font-size * $heading-margin-top-to-heading-factor - 2 * $paragraph-margin-bottom;
}

h5 + h6 {
  margin-top: $h6-font-size * $heading-margin-top-to-heading-factor - 2 * $paragraph-margin-bottom;
}

hr + h2 {
  margin-top: 0;
}

p.lead {
  margin-top: -7px;
}

h2::before,
h3::before,
h4::before {
  user-select: text;
}

h2.nocount::before,
h3.nocount::before,
h4.nocount::before {
  content: "";
  counter-increment: none;
}
